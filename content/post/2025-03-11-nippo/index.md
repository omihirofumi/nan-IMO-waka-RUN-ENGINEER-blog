---
date: '2025-03-11T23:46:35+09:00'
tags:
- にっぽー
title: 'にっぽー'
---
## まずは反省会
顧客にほんとはここまでにこういうの出来てて欲しかったんだよね、みたいなことを言わせてしまった。  
### 原因
<!--more-->
- 最低限この機能あればリリースできるみたいな調整が出来ていなかった。  
- 毎週要件が増えていくので、それについての調査対応でプロダクトとして進みが遅いように見えた。  

### 学んだこと
- まず、最初の段階でこの機能は欲しい。これさえあればリリースできる、というのを明確にしておく。
- 機能や要件の追加要望があった場合、都度これは初期リリースに必要な機能か、後々の追加機能かを明確にしておく。
- 見せ方の工夫も大事だと思う。
  - 今回は、PL的な立ち位置で顧客と相対していたので、プロダクトの進捗具合が大事だったが、メンバーの場合は
    - できれば小さいタスクに分解し、進捗を見える化したほうがいいと思っている。これも経験談

いい経験なので、次に活かしていきたい。

## 今日やったこと
### ArgoCD使ったCDパイプラインの改善と調査
AutoSync使うと不都合があったので、Github ActionsからArgoCDのAPIを叩いてデプロイするように変更する方針を立てた。  
その際に、ArgoCDのAPIの認証方法や、どのようにデプロイするかを調査した。  
`Automation Tokens`というトークンがCIで実行するときに適していそうだった。  
https://argo-cd.readthedocs.io/en/stable/operator-manual/security/#authentication

### AWS ECS for Fargate vs App Runner
SnowflakeのSQLを叩くWebアプリを作っていて、どのようなインフラを使うか検討していた。  
Snowflake側でネットワークルール作ってアクセス元を制限しているので、IPやVPCを柔軟に設定したい。  
App RunnerもVPCコネクタ + NAT Gatewayを使えばVPCから外部に出れるようになるが、Fargateの方がより細かく設定ができるのとVPCとの連携がしやすい + トラフィックなど考えるとコストパもよかったので、Fargateにした。  
Lambda Web Adapterは、Lambdaのコールドスタートの問題とうがあるので、Fargateの方がよさそうだった。
